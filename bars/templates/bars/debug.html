<!DOCTYPE html>
<html>
<head>
    <title>Debug Info</title>
    <style>
        body { font-family: monospace; margin: 20px; }
        .section { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Railway Debug Info</h1>
    
    <div class="section">
        <h2>Settings</h2>
        <p>DATA_DIR: {{ debug_info.DATA_DIR }}</p>
        <p>MEDIA_ROOT: {{ debug_info.MEDIA_ROOT }}</p>
        <p>MEDIA_URL: {{ debug_info.MEDIA_URL }}</p>
    </div>

    <div class="section">
        <h2>Data Directory</h2>
        <p>Exists: {{ debug_info.data_dir_exists }}</p>
        {% if debug_info.data_dir_contents %}
            <p>Contents:</p>
            <ul>
            {% for item in debug_info.data_dir_contents %}
                <li>{{ item }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        {% if debug_info.data_dir_error %}
            <p class="error">Error: {{ debug_info.data_dir_error }}</p>
        {% endif %}
    </div>

    <div class="section">
        <h2>Media Root</h2>
        <p>Exists: {{ debug_info.media_root_exists }}</p>
        {% if debug_info.media_root_contents %}
            <p>Contents:</p>
            <ul>
            {% for item in debug_info.media_root_contents %}
                <li>{{ item }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        <p>Bars folder exists: {{ debug_info.bars_path_exists }}</p>
        <p>Bars files count: {{ debug_info.bars_files_count }}</p>
        {% if debug_info.media_root_error %}
            <p class="error">Error: {{ debug_info.media_root_error }}</p>
        {% endif %}
    </div>

    <div class="section">
        <h2>Database Photos (first 5)</h2>
        {% if debug_info.db_photos %}
            {% for photo in debug_info.db_photos %}
                <div style="margin: 10px 0; padding: 5px; border: 1px solid #eee;">
                    <p><strong>{{ photo.bar_name }}</strong></p>
                    <p>Image path: {{ photo.image_path }}</p>
                    <p>Full path: {{ photo.full_path }}</p>
                    <p>File exists: 
                        <span class="{% if photo.file_exists %}success{% else %}error{% endif %}">
                            {{ photo.file_exists }}
                        </span>
                    </p>
                </div>
            {% endfor %}
        {% endif %}
        {% if debug_info.db_photos_error %}
            <p class="error">Error: {{ debug_info.db_photos_error }}</p>
        {% endif %}
    </div>

    <div class="section">
        <h2>URL Test</h2>
        {% if debug_info.test_photo_url %}
            <p>Test photo URL: <a href="{{ debug_info.test_photo_url }}" target="_blank">{{ debug_info.test_photo_url }}</a></p>
            <p>Test photo name: {{ debug_info.test_photo_name }}</p>
            <img src="{{ debug_info.test_photo_url }}" alt="Test image" style="max-width: 200px; border: 1px solid #ccc;">
        {% endif %}
        {% if debug_info.url_test_error %}
            <p class="error">URL test error: {{ debug_info.url_test_error }}</p>
        {% endif %}
    </div>

    {% if debug_info.general_error %}
        <div class="section">
            <h2 class="error">General Error</h2>
            <p class="error">{{ debug_info.general_error }}</p>
        </div>
    {% endif %}
</body>
</html>